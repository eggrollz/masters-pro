<!DOCTYPE html>
<html>
<head>
  <title>Students Directory</title>
  <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>

  <ul class="nav">
    <li><a href="../DirectoryPage/index.html">Directory</a></li>
    <li><a href="../MapPage/mapindex.html">Map</a></li>
    <li><a href="../ProfilePage/prof.html">My Profile</a></li>
    <li><a href="../ProfileForm/profform.html">Edit Profile</a></li>
    <li><a href="../About/aboutpage.html">About</a></li>
  </ul>

  <div class="dir">
    <h2> Directory </h2>
      <select id = "classlist" Name="Class of">
        <option value="please select">Select here</option>
        <option value="2019">Class of 2019</option>
        <option value="2018">Class of 2018</option>
        <option value="2017">Class of 2017</option>
        <option value="2016">Class of 2016</option>
        <option value="2015">Class of 2015</option>
        <option value="2014">Class of 2014</option>
        <option value="2013">Class of 2013</option>
        <option value="2012">Class of 2012</option>
        <option value="2011">Class of 2011</option>
        <option value="staff">Staff</option>
      </select>
  </div>
  <div id="page"></div>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="../database.js"></script>

  <script>
    $(document).ready(function() {
      $("#classlist").change(function() {
        var selectedValue = $('#classlist').val();
        var year = classData["c" + selectedValue];
        renderPage(year)
      });

      function renderPage(classYear) {
        $("#page").empty()
        classYear.forEach(function(person){
          var personDiv = $('<a href="../ProfilePage/prof.html?year=c' + person.yearstarted + '&email=' + person.email + '" class="box"/>')
          var personUl = $('<ul class="prof-list"/>')
          var personName = $('<li/>')
          var jobTitle = $('<li/>')
          var employer = $('<li/>')
          var jobLocation = $('<li/>')
          var yearStarted = $('<li/>')
          var interests = $('<li/>')

          personName.text(person.name)
          jobTitle.text(person.jobtitle)
          employer.text(person.employer)
          jobLocation.text(person.joblocation)
          yearStarted.text(person.yearstarted)
          interests.text(person.interests)

        console.log(yearStarted)
          personUl.append(personName)
          personUl.append(jobTitle)
          personUl.append(employer)
          personUl.append(jobLocation)
          personUl.append(yearStarted)
          personUl.append(interests)
          personDiv.append(personUl)
          $("#page").append(personDiv)
        })
      }
    });

  </script>
  </body>
</html>
