<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="profstyle.css">
    <title>Profile Page</title>
  </head>

  <body>
    <ul class="nav">
      <li><a href="../DirectoryPage/index.html">Directory</a></li>
      <li><a href="../MapPage/mapindex.html">Map</a></li>
      <li><a href="../ProfilePage/prof.html">My Profile</a></li>
      <li><a href="../ProfileForm/profform.html">Edit Profile</a></li>
      <li><a href="../About/aboutpage.html">About</a></li>
    </ul>

    <div class="profbox">
      <img src="https://source.unsplash.com/random/500x500" alt="" class="box-img">
      <br/>
      <h1 id="personName"></h1>
      <br/>
      <div id="personTitle"></div>
      <div id="personEmployer"></div>
      <div id="personLocation"></div>
    </div>

    <div class="profbox" id=personYear>
    </div>

    <div class="text">
      <span id="personDescription">
      </span>
    </div>

    <div class="text">
      <span id="personInterests">
      </span>
    </div>

    <div class="text">
      <div id="personEmail">
      </div>

      <div id="personPhone">
      </div>

      <div id="personSite">
      </div>

    </div>

    <!-- <div class="text">
      Description:
      <span id="personDescription">Currently a 2018 candidate in the UA MS GIST program.
        Expected to graduate in December 2018. Also working at the Town of Marana Technology Services Department,
         where I digitize as-builts, and help out with GIS related activities.
       </span>
    </div>

    <div class="text">
      Interests:
      <span id="personInterests">development, sustainability
      </span>
    </div>

    <div class="text">
      <div id="personEmail">
        Email: quyenttha@gmail.com
      </div>
      <div id="personPhone">
        Phone: (571)243-8787
      </div>
      <div id="personSite">
        LinkedIn: www.linkedin.com/in/quyentha/
      </div>
    </div> -->


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="../database.js"></script>
    <!-- load variables from query string, then find person's data from the json database, like Logan's code  -->
    <!-- Find values in query string
    var year =
    var email =

    var thisYearsData = classData[year]
    var myPerson = thisYearsData.find(function(item) {
      if (item.email == email) {
        return item
      }
      else {
        return null
      }
    })

    myNameDiv.text(myPerson.name)
     -->
    <script>

      //get variables from string from url
      var urlParams = new URLSearchParams(window.location.search)
      var email = urlParams.get('email');
      var year = urlParams.get('year');

      //create myPerson variable that holds the JSON data for the person
      $(document).ready(function () {
        var thisYearsData = classData[year]
        //thisYearsData.find() is an array.find() function
        var myPerson = thisYearsData.find(function(item) {
          if (item.email == email) {
            return true
          }
          else {
            return false
          }
          // the short hand of the function above is: return i.email == email
        })

        if (myPerson) {
          $("#personName").text(myPerson.name)
          $("#personTitle").text(myPerson.jobtitle)
          $("#personEmployer").text(myPerson.employer)
          $("#personLocation").text(myPerson.joblocation)
          $("#personYear").text("Year started: " + myPerson.yearstarted)
          $("#personDescription").text("Description: " + myPerson.description)
          $("#personInterests").text("Interests: " + myPerson.interests)
          $("#personEmail").text("Email: " + myPerson.email)
          $("#personPhone").text("Phone: " + myPerson.phone)
          $("#personSite").text("Website: " + myPerson.website)

          // $("img").attr('src', 'https://source.unsplash.com/random/500x500')
        }
        else {
          $("#personName").text("Profile Not Found")
        }

      })




    </script>
  </body>

</html>
